-- Crear tabla CLIENTES
CREATE TABLE CLIENTES (
    ID_CLIENTE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOMBRE VARCHAR2(50) NOT NULL,
    APELLIDO VARCHAR2(50) NOT NULL,
    EMAIL VARCHAR2(100) UNIQUE NOT NULL,
    DIRECCION VARCHAR2(200),
    TELEFONO VARCHAR2(15),
    PRIMARY KEY (ID_CLIENTE)
);

-- Crear tabla CATEGORIAS
CREATE TABLE CATEGORIAS (
    ID_CATEGORIA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOMBRE_CATEGORIA VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(255),
    PRIMARY KEY (ID_CATEGORIA)
);

-- Crear tabla PROVEEDORES
CREATE TABLE PROVEEDORES (
    ID_PROVEEDOR NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    CONTACTO VARCHAR2(100),
    TELEFONO VARCHAR2(15),
    DIRECCION VARCHAR2(200)
);

-- Crear tabla SUCURSALES
CREATE TABLE SUCURSALES (
    ID_SUCURSAL NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    DIRECCION VARCHAR2(200) NOT NULL,
    TELEFONO VARCHAR2(15)
);

-- Crear tabla EMPLEADOS
CREATE TABLE EMPLEADOS (
    ID_EMPLEADO NUMBER PRIMARY KEY,
    NOMBRE VARCHAR2(100) NOT NULL,
    APELLIDO VARCHAR2(100) NOT NULL,
    TELEFONO VARCHAR2(15),
    ID_SUCURSAL NUMBER NOT NULL,
    CONSTRAINT FK_ID_SUCURSAL FOREIGN KEY (ID_SUCURSAL) REFERENCES SUCURSALES(ID_SUCURSAL)
);

-- Crear tabla PRODUCTOS
CREATE TABLE PRODUCTOS (
    ID_PRODUCTO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(255),
    PRECIO NUMBER(10, 2) NOT NULL,
    ID_CATEGORIA NUMBER,
    ID_PROVEEDOR NUMBER,
    PRIMARY KEY (ID_PRODUCTO),
    CONSTRAINT FK_PRODUCTO_CATEGORIA FOREIGN KEY (ID_CATEGORIA)
        REFERENCES CATEGORIAS (ID_CATEGORIA),
    CONSTRAINT FK_PRODUCTO_PROVEEDOR FOREIGN KEY (ID_PROVEEDOR)
        REFERENCES PROVEEDORES (ID_PROVEEDOR)
);

-- Crear tabla CARRITO
CREATE TABLE CARRITO (
    ID_CARRITO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_CLIENTE NUMBER,
    TOTAL NUMBER(10, 2) DEFAULT 0,
    FECHA DATE DEFAULT SYSDATE,
    PRIMARY KEY (ID_CARRITO),
    CONSTRAINT FK_CARRITO_CLIENTE FOREIGN KEY (ID_CLIENTE)
        REFERENCES CLIENTES (ID_CLIENTE)
);

-- Crear tabla ORDENES
CREATE TABLE ORDENES (
    ID_ORDEN NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_CLIENTE NUMBER,
    ID_EMPLEADO NUMBER,
    FECHA DATE DEFAULT SYSDATE,
    TOTAL NUMBER(10, 2) NOT NULL,
    PRIMARY KEY (ID_ORDEN),
    CONSTRAINT FK_ORDEN_CLIENTE FOREIGN KEY (ID_CLIENTE)
        REFERENCES CLIENTES (ID_CLIENTE),
    CONSTRAINT FK_ORDEN_EMPLEADO FOREIGN KEY (ID_EMPLEADO)
        REFERENCES EMPLEADOS (ID_EMPLEADO)
);

-- Crear tabla INVENTARIO
CREATE TABLE INVENTARIO (
    ID_INVENTARIO NUMBER PRIMARY KEY,
    ID_SUCURSAL NUMBER,
    ID_PRODUCTO NUMBER,
    CANTIDAD NUMBER NOT NULL,
    ULTIMA_ACTUALIZACION DATE DEFAULT SYSDATE,
    CONSTRAINT FK_INVENTARIO_SUCURSAL FOREIGN KEY (ID_SUCURSAL) REFERENCES SUCURSALES(ID_SUCURSAL),
    CONSTRAINT FK_INVENTARIO_PRODUCTO FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO)
);

-- Crear tabla ORDENES_PRODUCTOS
CREATE TABLE ORDENES_PRODUCTOS (
    ID_ORDEN NUMBER,
    ID_PRODUCTO NUMBER,
    CANTIDAD NUMBER NOT NULL,
    PRIMARY KEY (ID_ORDEN, ID_PRODUCTO),
    CONSTRAINT FK_ORDENES_PRODUCTOS_ORDEN FOREIGN KEY (ID_ORDEN)
        REFERENCES ORDENES (ID_ORDEN),
    CONSTRAINT FK_ORDENES_PRODUCTOS_PRODUCTO FOREIGN KEY (ID_PRODUCTO)
        REFERENCES PRODUCTOS (ID_PRODUCTO)
);

-- Crear tabla ENVIOS
CREATE TABLE ENVIOS (
    ID_ENVIO NUMBER PRIMARY KEY,
    ID_ORDEN NUMBER NOT NULL,
    ESTADO VARCHAR2(50) NOT NULL,
    FECHA_ENVIO DATE DEFAULT SYSDATE,
    FECHA_ENTREGA_ESTIMADA DATE,
    DIRECCION_ENVIO VARCHAR2(200) NOT NULL,
    CONSTRAINT FK_ID_ORDEN FOREIGN KEY (ID_ORDEN) REFERENCES ORDENES(ID_ORDEN)
);

-- Crear tabla CARRITO_PRODUCTO
CREATE TABLE CARRITO_PRODUCTO (
    ID_CARRITO NUMBER,
    ID_PRODUCTO NUMBER,
    CANTIDAD NUMBER NOT NULL,
    PRIMARY KEY (ID_CARRITO, ID_PRODUCTO),
    CONSTRAINT FK_ID_CARRITO FOREIGN KEY (ID_CARRITO) REFERENCES CARRITO(ID_CARRITO),
    CONSTRAINT FK_ID_PRODUCTO FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS(ID_PRODUCTO)
);