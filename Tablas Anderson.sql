-- Crear tabla CLIENTES
CREATE TABLE CLIENTES (
    ID_CLIENTE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOMBRE VARCHAR2(50) NOT NULL,
    APELLIDO VARCHAR2(50) NOT NULL,
    EMAIL VARCHAR2(100) UNIQUE NOT NULL,
    DIRECCION VARCHAR2(200),
    TELEFONO VARCHAR2(15),
    PRIMARY KEY (ID_CLIENTE)
);


-- Crear tabla CARRITO
CREATE TABLE CARRITO (
    ID_CARRITO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_CLIENTE NUMBER,
    TOTAL NUMBER(10, 2) DEFAULT 0,
    FECHA DATE DEFAULT SYSDATE,
    PRIMARY KEY (ID_CARRITO),
    CONSTRAINT FK_CARRITO_CLIENTE FOREIGN KEY (ID_CLIENTE)
        REFERENCES CLIENTES (ID_CLIENTE)
);


-- Crear tabla PRODUCTOS
CREATE TABLE PRODUCTOS (
    ID_PRODUCTO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOMBRE VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(255),
    PRECIO NUMBER(10, 2) NOT NULL,
    ID_CATEGORIA NUMBER,
    ID_PROVEEDOR NUMBER,
    PRIMARY KEY (ID_PRODUCTO),
    CONSTRAINT FK_PRODUCTO_CATEGORIA FOREIGN KEY (ID_CATEGORIA)
        REFERENCES CATEGORIAS (ID_CATEGORIA),
    CONSTRAINT FK_PRODUCTO_PROVEEDOR FOREIGN KEY (ID_PROVEEDOR)
        REFERENCES PROVEEDORES (ID_PROVEEDOR)
);



-- Crear tabla ORDENES
CREATE TABLE ORDENES (
    ID_ORDEN NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    ID_CLIENTE NUMBER,
    ID_EMPLEADO NUMBER,
    FECHA DATE DEFAULT SYSDATE,
    TOTAL NUMBER(10, 2) NOT NULL,
    PRIMARY KEY (ID_ORDEN),
    CONSTRAINT FK_ORDEN_CLIENTE FOREIGN KEY (ID_CLIENTE)
        REFERENCES CLIENTES (ID_CLIENTE),
    CONSTRAINT FK_ORDEN_EMPLEADO FOREIGN KEY (ID_EMPLEADO)
        REFERENCES EMPLEADOS (ID_EMPLEADO)
);


-- Crear tabla ORDENES_PRODUCTOS
CREATE TABLE ORDENES_PRODUCTOS (
    ID_ORDEN NUMBER,
    ID_PRODUCTO NUMBER,
    CANTIDAD NUMBER NOT NULL,
    PRIMARY KEY (ID_ORDEN, ID_PRODUCTO),
    CONSTRAINT FK_ORDENES_PRODUCTOS_ORDEN FOREIGN KEY (ID_ORDEN)
        REFERENCES ORDENES (ID_ORDEN),
    CONSTRAINT FK_ORDENES_PRODUCTOS_PRODUCTO FOREIGN KEY (ID_PRODUCTO)
        REFERENCES PRODUCTOS (ID_PRODUCTO)
);

-- Crear tabla CATEGORIAS
CREATE TABLE CATEGORIAS (
    ID_CATEGORIA NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,
    NOMBRE_CATEGORIA VARCHAR2(100) NOT NULL,
    DESCRIPCION VARCHAR2(255),
    PRIMARY KEY (ID_CATEGORIA)
);